define("core/autocomplete_loader",["exports","core/autocomplete","./str"],(function(_exports,_autocomplete,_str){var _templateObject,_templateObject2,_templateObject3;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;var _systemImportTransformerGlobalIdentifier="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{};function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}_exports.init=async(selector,placeholder,paginationConfig,showinmodal)=>{const allResultString=await(0,_str.getString)("autocompletesearchresult","search"),clickHereString=await(0,_str.getString)("clickhere","moodle"),noResultsString=await(0,_str.getString)("noresultsfound","search");let currentPage=0;const itemsPerPage=paginationConfig;let allResults=[];(0,_autocomplete.autocomplete)({container:"#"+selector,placeholder:placeholder,detachedMediaQuery:showinmodal?"":"null",getSources(_ref){let{query:query}=_ref;return query.length<=3?[]:async function(query){let method=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"core_search_autocomplete";const Ajax=await("function"==typeof _systemImportTransformerGlobalIdentifier.define&&_systemImportTransformerGlobalIdentifier.define.amd?new Promise((function(resolve,reject){_systemImportTransformerGlobalIdentifier.require(["core/ajax"],resolve,reject)})):"undefined"!=typeof module&&module.exports&&"undefined"!=typeof require||"undefined"!=typeof module&&module.component&&_systemImportTransformerGlobalIdentifier.require&&"component"===_systemImportTransformerGlobalIdentifier.require.loader?Promise.resolve(require("core/ajax")):Promise.resolve(_systemImportTransformerGlobalIdentifier["core/ajax"]));return(await Ajax.call([{methodname:method,args:{query:query}}])[0]).results}(query).then((response=>{allResults=response;return[{sourceId:"settings",getItems(){const startIndex=currentPage*itemsPerPage,endIndex=startIndex+itemsPerPage;return allResults.slice(startIndex,endIndex)},getItemInputValue(_ref2){let{item:item}=_ref2;return item.description},getItemUrl(_ref3){let{item:item}=_ref3;return item.url},onSelect:function(_ref4){let{item:item}=_ref4;window.location.href=item.url},templates:{item(_ref5){let{item:item,html:html}=_ref5;return html(_templateObject||(_templateObject=_taggedTemplateLiteral(['\n                                <div class="aa-ItemWrapper">\n                                    <div class="aa-ItemContent">\n                                        <div class="aa-ItemIcon aa-ItemIcon--noBorder">\n                                            <svg\n                                                width="18"\n                                                height="18"\n                                                viewBox="0 0 24 24"\n                                                fill="none"\n                                                stroke="currentColor"\n                                                stroke-width="2"\n                                                stroke-linecap="round"\n                                                stroke-linejoin="round"\n                                            >\n                                                <path\n                                                        d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"\n                                                />\n                                                <polyline points="15 3 21 3 21 9"/>\n                                                <line x1="10" y1="14" x2="21" y2="3"/>\n                                            </svg>\n                                        </div>\n                                        <div class="aa-ItemContentBody">\n                                            <div class="aa-ItemContentTitle">\n                                                ','\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="aa-ItemWrapper">\n                                    <div class="aa-ItemContent aa-ItemContent--indented">\n                                        <div class="aa-ItemContentSubtitle aa-ItemContentSubtitle--standalone">\n                                            <span class="aa-ItemContentSubtitleIcon"></span>\n                                            <span>in <span class="aa-ItemContentSubtitleCategory">\n                                                    ',"\n                                                </span>\n                                                </span>\n                                        </div>\n                                    </div>\n                                </div>\n                            "])),item.settingvisiblename,item.path)},footer(_ref6){let{items:items,html:html}=_ref6;const totalItems=allResults.length,totalPages=Math.ceil(totalItems/itemsPerPage),numberOfPages=Array.from({length:totalPages},((_,i)=>i+1));return html(_templateObject2||(_templateObject2=_taggedTemplateLiteral(['\n                                <div class="footer-container">\n                                    <nav aria-label="Autocomplete pagination">\n                                        <ul class="pagination justify-content-center">\n                                            ','\n                                        </ul>\n                                    </nav>\n                                    <div class="text-center">\n                                        ','<a href="','">  ',"</a>\n                                    </div>\n                                </div>"])),numberOfPages.map((page=>html(_templateObject3||(_templateObject3=_taggedTemplateLiteral(['\n                                                        <li class="page-item ','">\n                                                            <a class="page-link pagination-button"\n                                                               data-page="','" href="#">',"</a>\n                                                        </li>"])),currentPage+1===page?"active":"",page,page))),allResultString,items[0].rooturl,clickHereString)}}}]}))},renderNoResults(_ref7,root){let{state:state,render:render}=_ref7;render('"'.concat(noResultsString," ").concat(state.query,'".'),root)}}),document.addEventListener("click",(event=>{event.target.classList.contains("pagination-button")&&(currentPage=parseInt(event.target.getAttribute("data-page"),10)-1,document.querySelector(".aa-Input").dispatchEvent(new Event("input")))}))}}));

//# sourceMappingURL=autocomplete_loader.min.js.map